<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Products â€¢ Krushi Mitra</title>
    <!-- Tailwind CDN is needed for the styling used in the Control Panel -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Note: './style.css' is commented out since the content is unknown, using Tailwind for styling -->
    <!-- <link rel="stylesheet" href="./style.css" /> -->

    <style>
        /* Essential structure styles */
        .container { max-width: 1280px; margin-left: auto; margin-right: auto; padding-left: 1.5rem; padding-right: 1.5rem; }
        .navbar { background-color: #f0fff4; border-bottom: 1px solid #d1fae5; }
        .nav-inner { display: flex; justify-content: space-between; align-items: center; padding: 1rem 0; }
        .brand { font-size: 1.5rem; font-weight: 700; color: #10B981; text-decoration: none; }
        .section-title { font-size: 2rem; font-weight: 700; color: #1F2937; margin-bottom: 1.5rem; }
        .footer { background-color: #f9fafb; border-top: 1px solid #e5e7eb; padding: 1.5rem 0; margin-top: 2rem; }
        .footer-inner { display: flex; justify-content: space-between; font-size: 0.875rem; color: #6B7280; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
    </style>
</head>
<body class="bg-gray-50 min-h-screen font-sans">

    <header class="navbar">
        <div class="container nav-inner">
            <a class="brand" href="./index.html">ðŸŒ± Krushi Mitra</a>
        </div>
    </header>

    <main class="container" style="padding:20px 0">
        <h2 class="section-title">Product Listings</h2>

        <!-- === CONTROL PANEL (Paste HTML for buttons here) === -->
        <div class="bg-white p-5 rounded-xl shadow-lg mb-8 flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0 sm:space-x-4 border-l-4 border-green-500">
            <h3 class="text-xl font-semibold text-gray-700">Data Management Tools</h3>
            
            <div class="flex flex-wrap justify-center sm:justify-end gap-3">
                
                <!-- Add New Button -->
                <button onclick="handleAddNew()" class="px-4 py-2 text-sm font-medium rounded-lg text-white bg-green-600 hover:bg-green-700 transition duration-150 shadow-md">
                    + Add New Product
                </button>
                
                <!-- Upload Folder/Data Button (Input is hidden, button clicks the input) -->
                <input type="file" id="data-upload" webkitdirectory directory multiple class="hidden" onchange="handleDataUpload(this.files)">
                <button onclick="document.getElementById('data-upload').click()" class="px-4 py-2 text-sm font-medium rounded-lg text-green-700 border border-green-700 bg-white hover:bg-green-50 transition duration-150 shadow-sm">
                    Upload Data
                </button>
                
                <!-- Submit Button -->
                <button onclick="handleSubmitReview()" class="px-4 py-2 text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 transition duration-150 shadow-md">
                    Submit for Review
                </button>
            </div>
        </div>
        <!-- === END CONTROL PANEL === -->
        
        <div id="productsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
             <p class="text-gray-500">Loading product listings...</p>
        </div>
    </main>
    

    <footer class="footer">
        <div class="container footer-inner">
            <p>Â© <span id="year"></span> Krushi Mitra.</p>
            <p>Contact: <a href="mailto:support@krushimitra.in">support@krushimitra.in</a></p>
        </div>
    </footer>

    <!-- Place all JavaScript logic HERE: before the closing </body> tag. -->
    <script>
        // ------------------------------------------------------------------
        // IMPORTANT: The 'showMessage' function MUST be defined first for
        // the handler functions to work correctly.
        // ------------------------------------------------------------------

        // Custom message box function (replaces alert)
        function showMessage(message, type = 'success') {
            const colors = {
                success: 'bg-green-500',
                info: 'bg-blue-500',
                warning: 'bg-yellow-500',
                error: 'bg-red-500'
            };
            const existingMsg = document.getElementById('temp-message');
            if(existingMsg) existingMsg.remove();

            const msgHtml = `<div id="temp-message" class="fixed top-0 left-1/2 transform -translate-x-1/2 mt-4 p-3 rounded-lg text-white font-semibold shadow-xl ${colors[type]}" style="z-index: 10000; transition: opacity 0.3s ease-out; animation: fadeIn 0.3s ease;">${message}</div>`;
            document.body.insertAdjacentHTML('beforeend', msgHtml);
            
            setTimeout(() => {
                const msg = document.getElementById('temp-message');
                if (msg) msg.style.opacity = '0';
                setTimeout(() => msg?.remove(), 300);
            }, 3000);
        }


        // --- 2. Control Panel Handler Functions (PASTE YOUR CODE HERE) ---
        
        function handleAddNew() {
            showMessage("Opening form to add new product...", 'info');
            // TODO: Implement form modal for adding a new product
        }

        function handleDataUpload(files) {
            if (files.length > 0) {
                const totalFiles = files.length;
                showMessage(`${totalFiles} files are uploading.`, 'success');
                console.log("Files selected for upload:", files);
                // TODO: Implement file processing and API submission
            } else {
                showMessage("No file selected.", 'warning');
            }
        }

        function handleSubmitReview() {
            showMessage("Dashboard data submitted for review.", 'info');
            // TODO: Implement API call to submit data
        }

        // --- Other necessary functions (from previous conversation) ---

        // Mock data and rendering functions are needed to show the initial grid
        //const mockProducts = [
            //{ id: 1, name: "Eco-Fertilizer", description: "100% organic compost for soil enrichment." },
            //{ id: 2, name: "Smart Water Sensor", description: "IoT device for precise irrigation control." },
            // ... add more mock products if necessary
        //];

        function renderProducts(container, items) {
             container.innerHTML = items.map(r => `
              <div class="card bg-white p-5 rounded-xl shadow-lg hover:shadow-xl transition duration-300 transform hover:scale-[1.02]">
                <h4 class="text-xl font-semibold text-gray-800 mb-2">${r.name || r.title}</h4>
                <p class="text-sm text-gray-500 mb-4">${r.description || r.desc || 'Product Listing'}</p>
                <button onclick="renderProductDetails(${r.id})" 
                    class="w-full bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 transition duration-150 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50"
                >
                    View Details
                </button>
              </div>
            `).join('');
        }
        
        function renderProductDetails(id) { /* implementation for modal */ } // Placeholder as full code is long
        function closeProductModal() { /* implementation for closing modal */ } // Placeholder
        const apiCall = (endpoint) => new Promise(resolve => resolve({ name: 'Eco-Fertilizer', description: 'Organic', category: 'Inputs', unit: 'Bag', price: 'â‚¹450', stock: '500 units', manufacturer: 'GreenLife Agro', rating: '4.5/5' })); // Mock API Call

        
        // --- Initialization ---

        document.getElementById('year').textContent = new Date().getFullYear();

        document.addEventListener('DOMContentLoaded', () => {
            const container = document.getElementById('productsGrid'); 
            renderProducts(container, mockProducts);
        });

    </script>
    <!-- <script src="./main.js"></script> is now commented out/redundant if all logic is here -->
</body>
</html>
